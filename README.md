# Caddy Manager

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Caddyfile —Å –∫—Ä–∞—Å–∏–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –Ω–∞ Tabler UI.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Frontend**: Vanilla JavaScript + Tabler UI
- **Backend**: Go + Gin Framework
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ç–∞–±–ª–∏—á–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Caddyfile —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
- üíæ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Caddy —Å–µ—Ä–≤–µ—Ä–∞
- üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤
- üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Ä—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîê –ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å Tabler UI
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- üìö –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Caddyfile

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.21 –∏–ª–∏ –≤—ã—à–µ
- Caddy —Å–µ—Ä–≤–µ—Ä
- –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `/etc/caddy/Caddyfile`

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd caddy-manager
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
go mod tidy
```

3. –°–æ–∑–¥–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env`:
```bash
make setup
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã
```

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:
```env
CADDYFILE_PATH=/etc/caddy/Caddyfile
BACKUP_DIR=./backups
PORT=8000
AUTH_USERNAME=admin
AUTH_PASSWORD=admin123
```

5. –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤:
```bash
mkdir -p backups
```

6. **Setup sudo permissions (required for production):**
```bash
sudo make setup-sudo
```
Details in [SUDO_SETUP.md](SUDO_SETUP.md)

7. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make dev

# –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
make start
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`

**–í–∞–∂–Ω–æ**: –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

### Makefile Commands

- `make setup` - Create `.env` file from example
- `make setup-sudo` - Setup sudo permissions (requires sudo)
- `make build` - Build application
- `make dev` - Run in development mode
- `make start` - Start in background mode
- `make stop` - Stop application
- `make restart` - Restart application
- `make status` - Show application status
- `make logs` - Show logs in real-time
- `make logs-show` - Show all logs
- `make clean` - Clean built files

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ Caddyfile –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Save" –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –±—ç–∫–∞–ø)
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫**: –ù–∞–∂–º–∏—Ç–µ "Restart Caddy" –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–ë—ç–∫–∞–ø—ã**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "Backups" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π

### API Endpoints

- `GET /api/caddyfile` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ Caddyfile
- `POST /api/caddyfile` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å Caddyfile
- `POST /api/restart` - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Caddy
- `GET /api/backups` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤
- `POST /api/backup` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –±—ç–∫–∞–ø
- `GET /api/backup/:id` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—ç–∫–∞–ø–∞
- `POST /api/restore/:id` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—ç–∫–∞–ø
- `GET /api/check-ports` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø–æ—Ä—Ç–æ–≤

## üìö –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ Caddyfile

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Caddyfile](https://caddyserver.com/docs/caddyfile/concepts) –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

### ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:

- **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏** - –±–ª–æ–∫ `{ }` –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
- **–°–Ω–∏–ø–ø–µ—Ç—ã** - –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ `(name) { }`
- **–ë–ª–æ–∫–∏ —Å–∞–π—Ç–æ–≤** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∞–¥—Ä–µ—Å–∞–º–∏ –∏ –¥–∏—Ä–µ–∫—Ç–∏–≤–∞–º–∏
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `#`
- **–î–∏—Ä–µ–∫—Ç–∏–≤—ã** - `reverse_proxy`, `file_server`, `request_body`, `transport`
- **–ü–æ–¥–¥–∏—Ä–µ–∫—Ç–∏–≤—ã** - `max_size`, `read_timeout`, `root *`
- **–ò–º–ø–æ—Ä—Ç—ã** - `import` –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –¥–ª—è —Å–Ω–∏–ø–ø–µ—Ç–æ–≤

### üîß –ü–∞—Ä—Å–µ—Ä Caddyfile:

- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏
- –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –∏ —Å–Ω–∏–ø–ø–µ—Ç—ã –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –¥–æ–º–µ–Ω–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ—Ä—Ç—ã –∏–∑ `reverse_proxy` –¥–∏—Ä–µ–∫—Ç–∏–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å `request_body` –∏ `transport`

### üìñ –ü—Ä–∏–º–µ—Ä—ã:

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `examples/` –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø—Ä–∏–º–µ—Ä—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:

- `complex-caddyfile` - –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
  - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
  - –°–Ω–∏–ø–ø–µ—Ç—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Å–∞–π—Ç–æ–≤ (file_server, reverse_proxy)
  - –°–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏
  - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –∏ –ø–æ–¥–¥–æ–º–µ–Ω—ã

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

- –ó–∞–ø—É—Å–∫–∞—Ç—å —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å AUTH_USERNAME –∏ AUTH_PASSWORD –≤ .env**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –±—ç–∫–∞–ø—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç—É —Ç–æ–ª—å–∫–æ —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö IP-–∞–¥—Ä–µ—Å–æ–≤

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
caddy-manager/
‚îú‚îÄ‚îÄ main.go              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ handlers.go          # API –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îú‚îÄ‚îÄ auth.go              # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚îú‚îÄ‚îÄ go.mod               # Go –º–æ–¥—É–ª–∏
‚îú‚îÄ‚îÄ env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ Makefile             # Management commands
‚îú‚îÄ‚îÄ SUDO_SETUP.md        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ sudo
‚îú‚îÄ‚îÄ static/              # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.html       # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Vanilla JS + Tabler UI)
‚îú‚îÄ‚îÄ backups/             # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –±—ç–∫–∞–ø–æ–≤
‚îú‚îÄ‚îÄ examples/            # –ü—Ä–∏–º–µ—Ä—ã Caddyfile
‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –°–±–æ—Ä–∫–∞

```bash
go build -o caddy-manager .
```

### –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

```bash
./caddy-manager
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 